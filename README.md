# Тестовое задание для Ozon Fintech

### ВАЖНО: при запуске необходимо дважды запустить docker compose для пребилда PostgreSQL

## REST API 
Для запуска приложения необходимо находясь в директории rest написать команду 
```
docker compose up 
```
#### Предоставляемые методы:
* getUrl - получение полного Url по его сокращенному. Тестировать вручную можно с помощью запросов на http://localhost:8080/get_url. Сокращенный Url(токен) необходимо передать в теле запроса, в качестве JSON
  вида:
```JSON
{
  "short_url": "7f137d6e3qw"
}
```
Ответом будет полный Url

* postUrl - получение сокращенного Url по полному. Тестировать вручную можно с помощью запросов на http://localhost:8080/post_url. Полный url передается в теле запроса в качестве JSON вида:
```JSON
{
   "full_url": "https://habr.com/ru/articles/"
}
```
Ответом будет сокращенный Url

## GRPC 
Для запуска приложения необходимо находясь в директории grpc написать команду 
```
docker compose up 
```

#### Предоставляемые методы:
* GetFullUrl - получение полного Url по его сокращенному. Тестировать вручную можно с помощью запросов на localhost:50051 метод GetFullUrl. Сокращенный Url(токен) необходимо передать в теле запроса, в виде:
```JSON
{
  "short_url": "7f137d6e3qw"
}
```
Ответом будет полный Url

* GetShortUrl - получение сокращенного Url по полному. Тестировать вручную можно с помощью запросов на localhost:50051 метод GetShortUrl. Полный url передается в теле запроса в виде:
```JSON
{
   "full_url": "https://habr.com/ru/articles/"
}
```
Ответом будет сокращенный Url

## Также поддерживается возможность выбора необходимой базы данных (SQL, in memory)
* Для того, чтобы выбрать SQL базу данных достаточно запустить контейнеры
* Для того, чтобы выбрать in memory базу данных в docker-compose.yml в строке
```
command: ["go", "run", "main.go", "-db", "sql"]
```
необходимо вместо "sql" указать "in_memory"

```
command: ["go", "run", "main.go", "-db", "in_memory"]
```

#### Также предоставляется Unit тест для проверки входного значения url-адреса 
Для запуска Unit теста необходимо перейти в директорию rest/app (для REST API) или в grpc/cmd/methods (для GRPC) (тесты аналогичны для REST API и для GRPC), ввести команду 
```go
go test
```

#### Методы по получению полного/сокращенного url тестировались вручную с помощью Postman
